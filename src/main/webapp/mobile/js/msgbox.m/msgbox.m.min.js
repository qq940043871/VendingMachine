(function(){var b=window,i="MsgBox";if(i in b){return}var o="";var l=function(r,q){r=r||{};q=q||{};for(var s in q){if(!(s in r)){r[s]=q[s]}}return r};var f=(function(){var q=("ontouchstart" in window),s="attachEvent" in document.documentElement,p=/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent);var u="  __com.czzdit.plugin.touch#"+new Date().getTime()+"__  ";var v=function(x,w){x=x||{};x[w]=x[w]||{};return x[w]};var t=function(z,A,x){if(!p){z[s?"attachEvent":"addEventListener"](s?"onclick":"click",A);return}var y=v(z,u+".tap");y.callbacks=y.callbacks||[];if(y.callbacks.indexOf(A)!=-1){return}y.callbacks.push(A);x=l(x,{timespan:500,delta:{}});x.delta=l(x.delta,{x:10,y:15});var w=v(z,u+".tap.meta");if(null==w.touchstart){w.touchstart=function(B){var C=B.changedTouches[0];y.startX=C.screenX;y.startY=C.screenY;y.startTimestamp=Date.now()};z.addEventListener("touchstart",w.touchstart)}if(null==w.touchend){w.touchend=function(F){var H=F.changedTouches[0];y.stopX=H.screenX;y.stopY=H.screenY;y.stopTimestamp=Date.now();var G=y.stopTimestamp-y.startTimestamp,C=Math.abs(y.stopX-y.startX),B=Math.abs(y.stopY-y.startY);if(G<=x.timespan&&C<=x.delta.x&&B<=x.delta.y){for(var D=0;D<y.callbacks.length;D++){var E=y.callbacks[D];E&&E.call(z,F)}}};z.addEventListener("touchend",w.touchend)}};var r=function(z,A){if(!p){z[s?"detachEvent":"removeEventListener"](s?"onclick":"click",A);return}if(!z.hasOwnProperty(u)){return}var y=v(z,u+".tap");var x=y.callbacks.indexOf(A);if(x==-1){return}y.callbacks.splice(x,1);if(y.callbacks.length==0){var w=v(z,u+".tap.meta");z.removeEventListener("touchstart",w.touchstart);z.removeEventListener("touchend",w.touchend);delete z[u].tap}};return{addTapListener:t,removeTapListener:r}})();var a=function(p){return String(p)+o};var m=a("MsgBox-Mask"),k=a("MsgBox-Container");var e=[];var n=function(){return 0==e.length?null:e[e.length-1]};var g=function(t){t=l(t,{title:"提示",content:"",maskStyle:null,containerStyle:null,titleStyle:null,contentStyle:null,buttonContainerStyle:null});var q=document.createElement("div");q.className=m;if(null!=t.maskStyle){q.style.cssText=t.maskStyle}var u=document.createElement("div");u.className=k;if(null!=t.containerStyle){u.style.cssText=t.containerStyle}var s=document.createElement("div");s.className=a("title");if(null!=t.titleStyle){s.style.cssText=t.titleStyle}s.innerHTML=String(t.title);var r=document.createElement("div");r.className=a("content");if(null!=t.contentStyle){r.style.cssText=t.contentStyle}if(null==t.content){t.content=""}if(!(t.content instanceof HTMLElement)){r.innerHTML=String(t.content)}else{r.appendChild(t.content)}var v=document.createElement("div");v.className=a("button-container");if(null!=t.buttonContainerStyle){v.style.cssText=t.buttonContainerStyle}u.appendChild(s);u.appendChild(r);u.appendChild(v);var p=[];this.getMaskDomElement=function(){return q};this.getContainerDomElement=function(){return u};this.getTitleDomElement=function(){return s};this.getContentDomElement=function(){return r};this.getButtonContainerDomElement=function(){return v};this.getTitle=function(){return t.title};this.getContent=function(){return t.content};this.addCloseListener=function(w){if(p.indexOf(w)==-1){p.push(w)}};this.removeCloseListener=function(x){var w=p.indexOf(x);if(w==-1){return}p.splice(w,1)};this.show=function(y,x){if(arguments.length<2){x=true}if(arguments.length<1){y=true}var w=0==e.length?null:e[e.length-1];if(null!=w){w.getMaskDomElement().style.display="none";w.getContainerDomElement().style.display="none"}u.style.visibility="hidden";y&&document.body.appendChild(q);document.body.appendChild(u);u.style.marginLeft=(-u.offsetWidth/2)+"px";u.style.left="50%";if(x){u.style.top="50%";u.style.marginTop=(-u.offsetHeight/2)+"px"}u.style.visibility="visible";e.push(this)};this.cancel=function(w){q.parentNode&&q.parentNode.removeChild(q);u.parentNode&&u.parentNode.removeChild(u);e.pop();if(arguments.length<1){w=true}if(w){var x=0==e.length?null:e[e.length-1];if(null!=x){x.getContainerDomElement().style.display="block";x.getMaskDomElement().style.display="block"}}};this.close=function(x,w){if(arguments.length<2){w=true}this.cancel(w);var z=this;for(var y=0;y<p.length;y++){var A=p[y];A&&A.call(z)}if(x){var z=null;while((z=n())!=null){z.close(false,false)}}};Object.freeze&&Object.freeze(this)};var c=function(q){q=l(q,{title:"提示",content:"",maskStyle:null,containerStyle:null,titleStyle:null,contentStyle:null,buttonContainerStyle:null});l(q,{confirmButtonText:null,confirmButtonStyle:null,confirmCallback:null});var r=new g(q);r.getContainerDomElement().className+=" alert";var p=document.createElement("div");p.className=a("button")+" confirm";p.style.cssText="margin-left: 1px;";if(null!=q.confirmButtonStyle){p.style.cssText=q.confirmButtonStyle}p.innerHTML=null!=q.confirmButtonText?q.confirmButtonText:"确定";f.addTapListener(p,function(s){(s.preventDefault)?s.preventDefault():(s.returnValue=false);if(q.confirmCallback){q.confirmCallback.call(r)}else{r.close()}});
r.getButtonContainerDomElement().appendChild(p);return r};var h=function(q){q=l(q,{title:"提示",content:"",maskStyle:null,containerStyle:null,titleStyle:null,contentStyle:null,buttonContainerStyle:null,isCancelButtonOnTheLeft:true});l(q,{confirmButtonText:null,confirmButtonStyle:null,confirmCallback:null,cancelButtonText:null,cancelButtonStyle:null,cancelCallback:null});var r=new g(q);r.getContainerDomElement().className+=" confirm";var p=document.createElement("div");p.className=a("button")+" confirm";if(null!=q.confirmButtonStyle){p.style.cssText=q.confirmButtonStyle}p.innerHTML=null!=q.confirmButtonText?q.confirmButtonText:"确定";f.addTapListener(p,function(t){(t.preventDefault)?t.preventDefault():(t.returnValue=false);if(q.confirmCallback){q.confirmCallback.call(r)}else{r.close()}});var s=document.createElement("div");s.className=a("button")+" cancel";if(null!=q.cancelButtonStyle){s.style.cssText=q.cancelButtonStyle}s.innerHTML=null!=q.cancelButtonText?q.cancelButtonText:"取消";f.addTapListener(s,function(t){(t.preventDefault)?t.preventDefault():(t.returnValue=false);if(q.cancelCallback){q.cancelCallback.call(r)}else{r.close()}});r.getButtonContainerDomElement().appendChild(q.isCancelButtonOnTheLeft?s:p);r.getButtonContainerDomElement().appendChild(q.isCancelButtonOnTheLeft?p:s);return r};var d=function(r){r=l(r,{title:"提示",content:"",maskStyle:null,containerStyle:null,titleStyle:null,contentStyle:null,buttonContainerStyle:null,isCancelButtonOnTheLeft:true});l(r,{cancelable:true,inputWrapperStyle:null,inputType:"text",inputStyle:null,inputDefaultValue:null,inputPlaceholder:null,confirmButtonText:null,confirmButtonStyle:null,confirmCallback:null,cancelButtonText:null,cancelButtonStyle:null,cancelCallback:null});var s=new g(r);s.getContainerDomElement().className+=!r.cancelable?" prompt not-cancelable":" prompt";var t=document.createElement("div");t.className="input-wrapper";if(null!=r.inputWrapperStyle){t.style.cssText=r.inputWrapperStyle}var q=document.createElement("input");q.type=r.inputType;q.placeholder=null!=r.inputPlaceholder?r.inputPlaceholder:"";q.value=null!=r.inputDefaultValue?r.inputDefaultValue:"";if(null!=r.inputStyle){q.style.cssText=r.inputStyle}t.appendChild(q);var p=document.createElement("div");p.className=a("button")+" confirm";if(null!=r.confirmButtonStyle){p.style.cssText=r.confirmButtonStyle}p.innerHTML=null!=r.confirmButtonText?r.confirmButtonText:"确定";f.addTapListener(p,function(v){(v.preventDefault)?v.preventDefault():(v.returnValue=false);if(r.confirmCallback){r.confirmCallback.call(s,q.value)}else{s.close()}});if(r.cancelable){var u=document.createElement("div");u.className=a("button")+" cancel";if(null!=r.cancelButtonStyle){u.style.cssText=r.cancelButtonStyle}u.innerHTML=null!=r.cancelButtonText?r.cancelButtonText:"取消";f.addTapListener(u,function(v){(v.preventDefault)?v.preventDefault():(v.returnValue=false);if(r.cancelCallback){r.cancelCallback.call(s)}else{s.close()}});s.getButtonContainerDomElement().appendChild(r.isCancelButtonOnTheLeft?u:p);s.getButtonContainerDomElement().appendChild(!r.isCancelButtonOnTheLeft?u:p)}else{s.getButtonContainerDomElement().appendChild(p)}s.getContentDomElement().appendChild(t);return s};var j=function(p){p=l(p,{type:j.ALERT});if(p.type==j.ALERT){return c(p)}if(p.type==j.CONFIRM){return h(p)}if(p.type==j.PROMPT){return d(p)}throw new Error("Illegal MsgBox type: "+p.type)};j.getCurrentBox=n;j.closeAll=function(){n()&&n().close(true)};j.ALERT=1;j.CONFIRM=2;j.PROMPT=3;b[i]=j})();